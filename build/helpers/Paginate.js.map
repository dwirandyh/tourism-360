{"version":3,"sources":["../../src/helpers/Paginate.js"],"names":["paginate","model","options","page","pageSize","count","totalPage","offset","limit","findAll","data","total","req","query"],"mappings":";;;;;;;;AAAO,IAAMA;AAAA,qEAAW,iBAAOC,KAAP,EAAcC,OAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AACdC,gBADc,GACKD,OADL,CACdC,IADc,EACRC,QADQ,GACKF,OADL,CACRE,QADQ;;;AAGtB,mBAAOF,QAAQC,IAAf;AACA,mBAAOD,QAAQE,QAAf;;AAJsB;AAAA,mBAMEH,MAAMI,KAAN,CAAYH,OAAZ,CANF;;AAAA;AAMhBI,qBANgB;;;AAQtBJ,oBAAQK,MAAR,GAAiB,CAACJ,OAAO,CAAR,IAAaC,QAA9B;AACAF,oBAAQM,KAAR,GAAgBJ,QAAhB;;AATsB;AAAA,mBAWHH,MAAMQ,OAAN,CAAcP,OAAd,CAXG;;AAAA;AAWhBQ,gBAXgB;AAAA,6CAaf;AACLP,oBAAM;AACJA,0BADI;AAEJC,kCAFI;AAGJO,uBAAOL;AAHH,eADD;AAMLI;AANK,aAbe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAX;;AAAA;AAAA;AAAA;AAAA,GAAN;;AAuBA,IAAMP,sBAAO,mBAAO;AACzB,MAAMA,OAAOS,IAAIC,KAAJ,CAAUV,IAAvB;AACA,MAAI,CAACA,IAAL,EAAW;AACT,WAAO,CAAP;AACD;AACD,SAAOA,IAAP;AACD,CANM;;AAQA,IAAMC,8BAAW,EAAjB","file":"Paginate.js","sourcesContent":["export const paginate = async (model, options) => {\r\n  const { page, pageSize } = options;\r\n\r\n  delete options.page;\r\n  delete options.pageSize;\r\n\r\n  const totalPage = await model.count(options);\r\n\r\n  options.offset = (page - 1) * pageSize;\r\n  options.limit = pageSize;\r\n\r\n  const data = await model.findAll(options);\r\n\r\n  return {\r\n    page: {\r\n      page,\r\n      pageSize,\r\n      total: totalPage\r\n    },\r\n    data\r\n  };\r\n};\r\n\r\nexport const page = req => {\r\n  const page = req.query.page;\r\n  if (!page) {\r\n    return 1;\r\n  }\r\n  return page;\r\n};\r\n\r\nexport const pageSize = 20;\r\n"]}